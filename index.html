<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta name="color-scheme" content="light dark" />

    <!-- Предварительная установка темы до загрузки стилей -->
    <script>
      (function () {
        try {
          var stored = localStorage.getItem('theme');
          var system = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          var t = stored || system;
          var root = document.documentElement;
          root.dataset.theme = t;
          if (t === 'dark') root.classList.add('dark');
          else root.classList.remove('dark');
        } catch (e) {}
      })();
    </script>

    <!-- Минимальный фон до загрузки Tailwind (снимает вспышку) -->
    <style>
      /* Светлая/тёмная по классу, пока не подтянулись стили */
      html { background: #ffffff; color: #0f172a; }
      html.dark { background: #020617; color: #f8fafc; }
      /* Если классов нет, подстрахуем системной темой */
      @media (prefers-color-scheme: dark) {
        html:not(.dark)[data-theme="dark"] { background: #020617; color: #f8fafc; }
      }
    </style>

    <title>Портфолио</title>
  </head>
  <body>
    <noscript>
      <style>
        /* Если JS выключен, используем системную тему как fallback */
        @media (prefers-color-scheme: dark) {
          html { background: #020617; color: #f8fafc; }
        }
      </style>
    </noscript>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
